var Ossn=Ossn||{};Ossn.Startups=new Array();Ossn.hooks=new Array();Ossn.events=new Array();Ossn.RegisterStartupFunction=function($func){Ossn.Startups.push($func);};Ossn.Clk=function($elem){$($elem).trigger('click');};Ossn.str_replace=function(search,replace,subject,countObj){var i=0
var j=0
var temp=''
var repl=''
var sl=0
var fl=0
var f=[].concat(search)
var r=[].concat(replace)
var s=subject
var ra=Object.prototype.toString.call(r)==='[object Array]'
var sa=Object.prototype.toString.call(s)==='[object Array]'
s=[].concat(s)
var $global=(typeof window!=='undefined'?window:global)
$global.$locutus=$global.$locutus||{}
var $locutus=$global.$locutus
$locutus.php=$locutus.php||{}
if(typeof(search)==='object'&&typeof(replace)==='string'){temp=replace
replace=[]
for(i=0;i<search.length;i+=1){replace[i]=temp}
temp=''
r=[].concat(replace)
ra=Object.prototype.toString.call(r)==='[object Array]'}
if(typeof countObj!=='undefined'){countObj.value=0}
for(i=0,sl=s.length;i<sl;i++){if(s[i]===''){continue}
for(j=0,fl=f.length;j<fl;j++){temp=s[i]+''
repl=ra?(r[j]!==undefined?r[j]:''):r[0]
s[i]=(temp).split(f[j]).join(repl)
if(typeof countObj!=='undefined'){countObj.value+=((temp.split(f[j])).length-1)}}}
return sa?s:s[0];};Ossn.redirect=function($url){window.location=Ossn.site_url+$url;};Ossn.UrlParams=function(name,url){var results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(url);if(!results){return 0;}
return results[1]||0;};Ossn.ParseStr=function(string){var params={},result,key,value,re=/([^&=]+)=?([^&]*)/g,re2=/\[\]$/;while(result=re.exec(string)){key=decodeURIComponent(result[1].replace(/\+/g,' '));value=decodeURIComponent(result[2].replace(/\+/g,' '));if(re2.test(key)){key=key.replace(re2,'');if(!params[key]){params[key]=[];}
params[key].push(value);}else{params[key]=value;}}
return params;};Ossn.ParseUrl=function(url,component,expand){expand=expand||false;component=component||false;var re_str='^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?://)?'
+'((?:(([^:@]*)(?::([^:@]*))?)?@)?'
+'([^:/?#]*)(?::(\\d*))?)'
+'(((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[?#]|$)))*/?)?([^?#/]*))'
+'(?:\\?([^#]*))?'
+'(?:#(.*))?)',keys={1:"scheme",4:"user",5:"pass",6:"host",7:"port",9:"path",12:"query",13:"fragment"},results={};if(url.indexOf('mailto:')===0){results['scheme']='mailto';results['path']=url.replace('mailto:','');return results;}
if(url.indexOf('javascript:')===0){results['scheme']='javascript';results['path']=url.replace('javascript:','');return results;}
var re=new RegExp(re_str);var matches=re.exec(url);for(var i in keys){if(matches[i]){results[keys[i]]=matches[i];}}
if(expand&&typeof(results['query'])!='undefined'){results['query']=Ossn.ParseStr(results['query']);}
if(component){if(typeof(results[component])!='undefined'){return results[component];}else{return false;}}
return results;};Ossn.isset=function($variable){if(typeof $variable!=='undefined'){return true;}
return false;};Ossn.call_user_func_array=function(cb,parameters){var $global=(typeof window!=='undefined'?window:global)
var func
var scope=null
var validJSFunctionNamePattern=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;if(typeof cb==='string'){if(typeof $global[cb]==='function'){func=$global[cb]}else if(cb.match(validJSFunctionNamePattern)){func=(new Function(null,'return '+cb)())}}else if(Object.prototype.toString.call(cb)==='[object Array]'){if(typeof cb[0]==='string'){if(cb[0].match(validJSFunctionNamePattern)){func=eval(cb[0]+"['"+cb[1]+"']")}}else{func=cb[0][cb[1]]}
if(typeof cb[0]==='string'){if(typeof $global[cb[0]]==='function'){scope=$global[cb[0]]}else if(cb[0].match(validJSFunctionNamePattern)){scope=eval(cb[0])}}else if(typeof cb[0]==='object'){scope=cb[0]}}else if(typeof cb==='function'){func=cb}
if(typeof func!=='function'){throw new Error(func+' is not a valid function')}
return func.apply(scope,parameters)};Ossn.is_callable=function(mixedVar,syntaxOnly,callableName){var $global=(typeof window!=='undefined'?window:global)
var validJSFunctionNamePattern=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var name=''
var obj={}
var method=''
var validFunctionName=false
var getFuncName=function(fn){var name=(/\W*function\s+([\w$]+)\s*\(/).exec(fn)
if(!name){return'(Anonymous)'}
return name[1]}
if(/(^class|\(this\,)/.test(mixedVar.toString())){return false}
if(typeof mixedVar==='string'){obj=$global
method=mixedVar
name=mixedVar
validFunctionName=!!name.match(validJSFunctionNamePattern)}else if(typeof mixedVar==='function'){return true}else if(Object.prototype.toString.call(mixedVar)==='[object Array]'&&mixedVar.length===2&&typeof mixedVar[0]==='object'&&typeof mixedVar[1]==='string'){obj=mixedVar[0]
method=mixedVar[1]
name=(obj.constructor&&getFuncName(obj.constructor))+'::'+method}
if(syntaxOnly||typeof obj[method]==='function'){if(callableName){$global[callableName]=name}
return true}
if(validFunctionName&&typeof eval(method)==='function'){if(callableName){$global[callableName]=name}
return true}
return false}
Ossn.is_hook=function($hook,$type){if(Ossn.hooks[$hook]&&Ossn.hooks[$hook][$type]){return true;}
return false;}
Ossn.unset_hook=function($hook,$type,$callback){if($hook==''||$type==''||$callback==''){return false;}
if(Ossn.is_hook($hook,$type)){for(i=0;i<=Ossn.hooks[$hook][$type].length;i++){if(Ossn.isset(Ossn.hooks[$hook][$type][i])){if(Ossn.isset(Ossn.hooks[$hook][$type][i].hook)){if(Ossn.hooks[$hook][$type][i].hook==$callback){Ossn.hooks[$hook][$type].splice(i,1);break;}}}}}};Ossn.add_hook=function($hook,$type,$callback,$priority=200){if($hook==''||$type==''){return false;}
if(!Ossn.isset(Ossn.hooks)){Ossn.hooks=new Array();}
if(!Ossn.isset(Ossn.hooks[$hook])){Ossn.hooks[$hook]=new Array();}
if(!Ossn.isset(Ossn.hooks[$hook][$type])){Ossn.hooks[$hook][$type]=new Array();}
if(!Ossn.is_callable($callback,true)){return false;}
$priority=Math.max(parseInt($priority),0);Ossn.hooks[$hook][$type].push({'hook':$callback,'priority':$priority,});return true;};Ossn.call_hook=function($hook,$type,$params=null,$returnvalue=null){$hooks=new Array();hookspush=Array.prototype.push
if(Ossn.isset(Ossn.hooks[$hook])&&Ossn.isset(Ossn.hooks[$hook][$type])){hookspush.apply($hooks,Ossn.hooks[$hook][$type]);}
$hooks.sort(function(a,b){if(a.priority<b.priority){return-1;}
if(a.priority>b.priority){return 1;}
return(a.index<b.index)?-1:1;});$.each($hooks,function(index,$item){$value=Ossn.call_user_func_array($item.hook,[$hook,$type,$returnvalue,$params]);if(Ossn.isset($value)){$returnvalue=$value;}});return $returnvalue;};Ossn.is_callback=function($event,$type){if(Ossn.isset(Ossn.events[$event][$type])){return true;}
return false;}
Ossn.register_callback=function($event,$type,$callback,$priority=200){if($event==''||$type==''){return false;}
if(!Ossn.isset(Ossn.events)){Ossn.events=new Array();}
if(!Ossn.isset(Ossn.events[$event])){Ossn.events[$event]=new Array();}
if(!Ossn.isset(Ossn.events[$event][$type])){Ossn.events[$event][$type]=new Array();}
if(!Ossn.is_callable($callback,true)){return false;}
$priority=Math.max(parseInt($priority),0);Ossn.events[$event][$type].push({'callback':$callback,'priority':$priority,});return true;};Ossn.unset_callback=function($event,$type,$callback){if($event==''||$type==''||$callback==''){return false;}
if(Ossn.is_callback($event,$type)){for(i=0;i<=Ossn.events[$event][$type].length;i++){if(Ossn.isset(Ossn.events[$event][$type][i])){if(Ossn.isset(Ossn.events[$event][$type][i].callback)){if(Ossn.events[$event][$type][i].callback==$callback){Ossn.events[$event][$type].splice(i,1);break;}}}}}};Ossn.trigger_callback=function($event,$type,$params=null){$events=new Array();eventspush=Array.prototype.push
if(Ossn.isset(Ossn.events[$event])&&Ossn.isset(Ossn.events[$event][$type])){eventspush.apply($events,Ossn.events[$event][$type]);}else{return false;}
$events.sort(function(a,b){if(a.priority<b.priority){return-1;}
if(a.priority>b.priority){return 1;}
return(a.index<b.index)?-1:1;});$tempvalue=null;$.each($events,function(index,$item){if(Ossn.is_callable($item.callback)&&(Ossn.call_user_func_array($item.callback,[$event,$type,$params])==false)){return false;}});return true;};Ossn.setrawcookie=function(name,value,expires,path,domain,secure){if(typeof expires==='string'&&(/^\d+$/).test(expires)){expires=parseInt(expires,10)}
if(expires instanceof Date){expires=expires.toUTCString()}else if(typeof expires==='number'){expires=(new Date(expires*1e3)).toUTCString()}
var r=[name+'='+value],s={},i=''
s={expires:expires,path:path,domain:domain}
for(i in s){if(s.hasOwnProperty(i)){s[i]&&r.push(i+'='+s[i])}}
return secure&&r.push('secure'),window.document.cookie=r.join(';'),true};Ossn.setCookie=function(name,value,expires,path,domain,secure){return Ossn.setrawcookie(name,encodeURIComponent(value),expires,path,domain,secure)};Ossn.getCookie=function(name){var i=0,c='',nameEQ=name+'=',ca=document.cookie.split(';'),cal=ca.length;for(i=0;i<cal;i++){c=ca[i].replace(/^ */,'');if(c.indexOf(nameEQ)===0){return decodeURIComponent(c.slice(nameEQ.length).replace(/\+/g,'%20'));}}
return null;};Ossn.ajaxRequest=function($datap){$(function(){var $form_name=$datap['form'];$('body').on("submit",$form_name,function(event){var $data=Ossn.call_hook('ajax','request:settings',null,$datap);var url=$data['url'];var callback=$data['callback'];var error=$data['error'];var befsend=$data['beforeSend'];var action=$data['action'];var containMedia=$data['containMedia'];var $xhr=$data['xhr'];if(url==true){url=$($form_name).attr('action');}
event.preventDefault();event.stopImmediatePropagation();if(!callback){return false;}
if(!befsend){befsend=function(){}}
if(!action){action=false;}
if(action==true){url=Ossn.AddTokenToUrl(url);}
if(!error){error=function(xhr,status,error){if(error=='Internal Server Error'||error!==''){Ossn.MessageBox('syserror/unknown');}};}
if(!$xhr){$xhr=function(){var xhr=new window.XMLHttpRequest();return xhr;};}
var $form=$(this);if(containMedia==true){$requestData=new FormData($form[0]);$removeNullFile=function(formData){if(formData.keys){for(var key of formData.keys()){var fileName=null||formData.get(key)['name'];var fileSize=null||formData.get(key)['size'];if(fileName!=null&&fileSize!=null&&fileName==''&&fileSize==0){formData.delete(key);}}}};$removeNullFile($requestData);$vars={xhr:$xhr,async:true,cache:false,contentType:false,type:'post',beforeSend:befsend,url:url,error:error,data:$requestData,processData:false,success:callback,};}else{$vars={xhr:$xhr,async:true,type:'post',beforeSend:befsend,url:url,error:error,data:$form.serialize(),success:callback,};}
return $.ajax($vars);});});};Ossn.PostRequest=function($datap){var $data=Ossn.call_hook('ajax:post','request:settings',null,$datap);var url=$data['url'];var callback=$data['callback'];var error=$data['error'];var befsend=$data['beforeSend'];var $fdata=$data['params'];var async=$data['async'];var action=$data['action'];var $xhr=$data['xhr'];if(!callback){return false;}
if(!befsend){befsend=function(){}}
if(typeof async==='undefined'){async=true;}
if(!action){action=true;}
if(action==true){url=Ossn.AddTokenToUrl(url);}
if(!error){error=function(){};}
if(!$xhr){$xhr=function(){var xhr=new window.XMLHttpRequest();return xhr;};}
return $.ajax({xhr:$xhr,async:async,type:'post',beforeSend:befsend,url:url,error:error,data:$fdata,success:callback,});};Ossn.AddTokenToUrl=function(data){if(typeof data==='string'){var parts=Ossn.ParseUrl(data),args={},base='';if(parts['host']===undefined){if(data.indexOf('?')===0){base='?';args=Ossn.ParseStr(parts['query']);}}else{if(parts['query']!==undefined){args=Ossn.ParseStr(parts['query']);}
var split=data.split('?');base=split[0]+'?';}
args["ossn_ts"]=Ossn.Config.token.ossn_ts;args["ossn_token"]=Ossn.Config.token.ossn_token;return base+jQuery.param(args);}};var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase();}
function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}
return output.join('');}
var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0]);}
return str_format.format.call(null,str_format.cache[arguments[0]],arguments);};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output.push(parse_tree[i]);}else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw(sprintf('[sprintf] property "%s" does not exist',match[2][k]));}
arg=arg[match[2][k]];}}else if(match[1]){arg=argv[match[1]];}else{arg=argv[cursor++];}
if(/[^s]/.test(match[8])&&(get_type(arg)!='number')){throw(sprintf('[sprintf] expecting number but found %s',get_type(arg)));}
switch(match[8]){case'b':arg=arg.toString(2);break;case'c':arg=String.fromCharCode(arg);break;case'd':arg=parseInt(arg,10);break;case'e':arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'o':arg=arg.toString(8);break;case's':arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case'u':arg=Math.abs(arg);break;case'x':arg=arg.toString(16);break;case'X':arg=arg.toString(16).toUpperCase();break;}
arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?'+'+arg:arg);pad_character=match[4]?match[4]=='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):'';output.push(match[5]?arg+pad:pad+arg);}}
return output.join('');};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0]);}else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push('%');}else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);}else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1]);}else{throw('[sprintf] huh?');}}}else{throw('[sprintf] huh?');}
match[2]=field_list;}else{arg_names|=2;}
if(arg_names===3){throw('[sprintf] mixing positional and named placeholders is not (yet) supported');}
parse_tree.push(match);}else{throw('[sprintf] huh?');}
_fmt=_fmt.substring(match[0].length);}
return parse_tree;};return str_format;})();var vsprintf=function(fmt,argv){argv.unshift(fmt);return sprintf.apply(null,argv);};Ossn.Print=function(str,args){if(OssnLocale[str]){if(!args){return OssnLocale[str];}else{return vsprintf(OssnLocale[str],args);}}
return str;};Ossn.isLangString=function(str,args){if(OssnLocale[str]){return true;}
return false;};Ossn.MessageBoxClose=function(){$('.ossn-message-box').hide();$('.ossn-halt').removeClass('ossn-light').hide();$('.ossn-halt').attr('style','');};Ossn.ModalBox=function(params=false){if(!params){return false;}
$('.ossn-halt').addClass('ossn-light');$('.ossn-halt').attr('style','height:'+$(document).height()+'px;');$('.ossn-halt').show();$('.ossn-message-box').html('<div class="ossn-loading ossn-box-loading"></div>');$('.ossn-message-box').fadeIn('slow');callback=false;if(params['callback']){callback=params['callback'];}
$title=params['title'];$content=params['content'];if(params['button']){button=params['button'];}else{button=Ossn.Print('save');}
var content='<div class="title">'+$title+'<div class="close-box" onclick="Ossn.MessageBoxClose();"><i class="fa fa-times"></i></div></div><div class="contents"><div class="ossn-box-inner"><div style="width:100%;margin:auto;">'+$content+'</div></div></div>';content+='<div class="control"><div class="controls">';if(callback!=false){content+='<a href="javascript:void(0);" onclick="Ossn.Clk(\''+callback+'\');" class="btn btn-primary btn-sm">'+button+'</a>';}
content+=' <a href="javascript:void(0);" onclick="Ossn.MessageBoxClose();" class="btn btn-default btn-sm">'+Ossn.Print('cancel')+'</a>';content+='</div></div>';$('.ossn-message-box').html(content).fadeIn();};Ossn.MessageBox=function($url){Ossn.PostRequest({url:Ossn.site_url+$url,beforeSend:function(){$('.ossn-halt').addClass('ossn-light');$('.ossn-halt').attr('style','height:'+$(document).height()+'px;');$('.ossn-halt').show();$('.ossn-message-box').html('<div class="ossn-loading ossn-box-loading"></div>');$('.ossn-message-box').fadeIn('slow');},callback:function(callback){$('.ossn-message-box').html(callback).fadeIn();},});};Ossn.trigger_message=function($message,$type){$type=$type||'success';if($type=='error'){$type='danger';}
if($message==''){return false;}
const toastId='ossn-system-message-item-'+Date.now()+Math.floor(Math.random()*1000);const $html=`<div id="${toastId}"class="toast align-items-center text-bg-${$type} border-0 mt-2 mb-2"role="alert"aria-live="assertive"aria-atomic="true"
data-bs-autohide="true"data-bs-delay="10000"><div class="d-flex"><div class="toast-body">${$message}</div><button type="button"class="btn-close btn-close-white me-2 m-auto"data-bs-dismiss="toast"></button></div></div>`;$('.ossn-system-message.toast-container').append($html);const toastEl=document.getElementById(toastId);const toast=new bootstrap.Toast(toastEl);toast.show();toastEl.addEventListener('hidden.bs.toast',function(){toastEl.remove();});};Ossn.Drag=function(drag_cb=false){var theme_config=$('#ossn-theme-config');var default_cover_height=theme_config.attr('data-desktop-cover-height');var default_cover_width=theme_config.attr('data-minimum-cover-image-width');if(typeof default_cover_height=='undefined'){default_cover_height=300;}
if(typeof default_cover_width=='undefined'){default_cover_width=1200;}
var image_width=document.querySelector("#draggable").naturalWidth;var image_height=document.querySelector("#draggable").naturalHeight;var cover_width=$("#container").width();var cover_height=$("#container").height();var drag_width=0;var drag_height=0;if(image_width>cover_width&&image_width+cover_width>default_cover_width*2){drag_width=image_width-default_cover_width;}
if(image_height>cover_height&&image_height+cover_height>default_cover_height*2){drag_height=image_height-default_cover_height;}
$.globalVars={originalTop:0,originalLeft:0,maxHeight:drag_height,maxWidth:drag_width};$("#draggable").draggable({start:function(event,ui){if(ui.position!=undefined){$.globalVars.originalTop=ui.position.top;$.globalVars.originalLeft=ui.position.left;}},drag:function(event,ui){var newTop=ui.position.top;var newLeft=ui.position.left;if(ui.position.top<0&&ui.position.top*-1>$.globalVars.maxHeight){newTop=$.globalVars.maxHeight*-1;}
if(ui.position.top>0){newTop=0;}
if(ui.position.left<0&&ui.position.left*-1>$.globalVars.maxWidth){newLeft=$.globalVars.maxWidth*-1;}
if(ui.position.left>0){newLeft=0;}
ui.position.top=newTop;ui.position.left=newLeft;if(typeof drag_cb=='function'){drag_cb(ui,$.globalVars);}}});};Ossn.MessageDone=function($message){return"<div class='ossn-message-done'>"+$message+"</div>";};Ossn.register_callback('ossn','init','ossn_startup_functions_compatibility');Ossn.register_callback('ossn','init','ossn_image_url_cache');Ossn.register_callback('ossn','init','ossn_makesure_confirmation');Ossn.register_callback('ossn','init','ossn_system_messages');Ossn.register_callback('ossn','init','ossn_user_signup_form');Ossn.register_callback('ossn','init','ossn_topbar_dropdown');Ossn.register_callback('ossn','init','ossn_checkbox_radio_check_uncheck');function ossn_user_signup_form(){Ossn.ajaxRequest({url:Ossn.site_url+"action/user/register",form:'#ossn-home-signup',beforeSend:function(request){var failedValidate=false;$('#ossn-submit-button').show();$('#ossn-home-signup .ossn-loading').addClass("ossn-hidden");$('#ossn-home-signup').find('#ossn-signup-errors').hide();$('#ossn-home-signup input').filter(function(){$(this).closest('span').removeClass('ossn-required');if(this.type=='radio'&&!$(this).hasClass('ossn-field-not-required')){$radio_name=this.name;if($("input[name='"+$radio_name+"']:checked").length==0){$(this).closest('.radio-block-container').addClass('ossn-required');failedValidate=true;}else{$(this).closest('.radio-block-container').removeClass('ossn-required');}}
if(this.type=='checkbox'&&!$(this).hasClass('ossn-field-not-required')){$checkbox_name=this.name;if($("input[name='"+$checkbox_name+"']:checked").length==0){$(this).closest('.checkbox-block-container').addClass('ossn-required');failedValidate=true;}else{$(this).closest('.checkbox-block-container').removeClass('ossn-required');}}
if(this.value==""&&!$(this).hasClass('ossn-field-not-required')){$(this).addClass('ossn-red-borders');failedValidate=true;request.abort();return false;}});if(failedValidate==false){$('#ossn-submit-button').hide();$('#ossn-home-signup .ossn-loading').removeClass("ossn-hidden");}},callback:function(callback){if(callback['dataerr']){$('#ossn-home-signup').find('#ossn-signup-errors').html(callback['dataerr']).fadeIn();$('#ossn-submit-button').show();$('#ossn-home-signup .ossn-loading').addClass("ossn-hidden");}else if(callback['success']==1){$('#ossn-home-signup').html(Ossn.MessageDone(callback['datasuccess']));}else{$('#ossn-home-signup .ossn-loading').addClass("ossn-hidden");$('#ossn-submit-button').attr('type','submit')
$('#ossn-submit-button').attr('style','opacity:1;');}}});}
function ossn_system_messages(){$(document).ready(function(){if($('.ossn-system-messages').find('button').length){$('.ossn-system-messages').find('.ossn-system-messages-inner').show();setTimeout(function(){$('.ossn-system-messages').find('.ossn-system-messages-inner').hide().empty();},10000);}
$('body').on('click','.ossn-system-messages .close',function(){$('.ossn-system-messages').find('.ossn-system-messages-inner').hide().empty();});});}
function ossn_topbar_dropdown(){$(document).ready(function(){$('.ossn-topbar-dropdown-menu-button').on('click',function(){if($('.ossn-topbar-dropdown-menu-content').is(":not(:visible)")){$('.ossn-topbar-dropdown-menu-content').show();}else{$('.ossn-topbar-dropdown-menu-content').hide();}});});}
function ossn_makesure_confirmation(){$(document).ready(function(){$('body').on('click','.ossn-make-sure',function(e){e.preventDefault();var msg='ossn:exception:make:sure';if(typeof $(this).data('ossn-msg')!=="undefined"){msg=$(this).data('ossn-msg');}
var del=confirm(Ossn.Print(msg));if(del==true){var actionurl=$(this).attr('href');window.location=actionurl;}});});}
function ossn_checkbox_radio_check_uncheck(){$(document).ready(function(){$("body").on('click','.checkbox-block span',function(){$(this).closest('.checkbox-block').find('.ossn-checkbox-input').trigger('click');});$("body").on('click','.radio-block span',function(){$(this).closest('.radio-block').find('.ossn-radio-input').trigger('click');});});}
function ossn_image_url_cache($callback,$type,$params){$(document).ready(function(){if(Ossn.Config.cache.ossn_cache==1){$('img').each(function(){var data=$(this).attr('src');$site_url=Ossn.ParseUrl(Ossn.site_url);var parts=Ossn.ParseUrl(data),args={},base='';if(parts['host']==$site_url['host']){if(parts['host']===undefined){if(data.indexOf('?')===0){base='?';args=Ossn.ParseStr(parts['query']);}}else{if(parts['query']!==undefined){args=Ossn.ParseStr(parts['query']);}
var split=data.split('?');base=split[0]+'?';}
if(!args['ossn_cache']){args["ossn_cache"]=Ossn.Config.cache.last_cache;$(this).attr('src',base+jQuery.param(args));}}});}});}
function ossn_startup_functions_compatibility($callback,$type,$params){for(var i=0;i<=Ossn.Startups.length;i++){if(typeof Ossn.Startups[i]!=="undefined"){Ossn.Startups[i]();}}}
Ossn.Init=function(){Ossn.trigger_callback('ossn','init');};function white_theme_addpost_img_bg(){$.each($('.ossn-wall-item .post-contents img:not(.post-contain-image-added)'),function(){$img_cont=$(this);if(!$img_cont.hasClass("user-img")&&$img_cont.parent().parent().find('post-contain-image').length==0&&$img_cont.parent().parent().parent().find('.link-preview-item-inner').length==0&&$img_cont.parent().parent().parent().find('.ossn-photos-wall').length==0&&$img_cont.parent().parent().parent().find('.image-event').length==0&&$img_cont.parent().parent().parent().find('.ossn-video-player').length==0&&!$img_cont.hasClass('multiupload-photo-item')){$img_cont.addClass('post-contain-image-added');$img=$img_cont.clone();$img_cont.parent().append('<div class="post-contain-image"></div>');$img_cont.parent().find('.post-contain-image').html($img);$img_cont.remove();}});}
function white_theme_set_mode($mode){console.log(parseInt($mode));switch(parseInt($mode)){case 1:$url='action/white/darkmode/enable';break;case 0:$url='action/white/darkmode/disable';break;default:return false;}
Ossn.PostRequest({url:Ossn.site_url+$url,callback:function(){},});}
$(document).ready(function(){$('body').on('click','#theme-darkmode-btn',function(e){e.stopPropagation();$type=$(this).attr('data-type');if($type==1){$(this).attr('data-type',0);}else{$(this).attr('data-type',1);}
white_theme_set_mode($type);$('#ossn-html').toggleClass('white-darkmode');});$('body').on('click','.wall-tabs .item',function(){var data=$(this).data('name');if(data!='post'){var loading='<div class="mx-auto ossn-loading"></div>';$('.newsfeed-middle').html(loading);}});$('[data-toggle="tooltip"]').tooltip({placement:'left',});white_theme_addpost_img_bg();$('body').on("click",'#topbar-search',function(){$('.search-topbar-sm').toggle();$('.site-name-container').toggle();});$(document).on('click','#sidebar-toggle',function(){var $toggle=$(this).attr('data-toggle');if($toggle==0){$(this).attr('data-toggle',1);if($(document).innerWidth()>=1300&&$('.ossn-page-loading-annimation').is(':visible')){$('.sidebar').addClass('sidebar-open-no-annimation');$('.ossn-page-container').addClass('sidebar-open-page-container-no-annimation');}else{$('.sidebar').addClass('sidebar-open');$('.ossn-page-container').addClass('sidebar-open-page-container');}
$('.topbar .right-side').addClass('right-side-space');$('.topbar .right-side').addClass('sidebar-hide-contents-xs');$('.ossn-inner-page').addClass('sidebar-hide-contents-xs');}
if($toggle==1){$(this).attr('data-toggle',0);$('.sidebar').removeClass('sidebar-open');$('.sidebar').removeClass('sidebar-open-no-annimation');$('.ossn-page-container').removeClass('sidebar-open-page-container');$('.ossn-page-container').removeClass('sidebar-open-page-container-no-annimation');$('.topbar .right-side').removeClass('right-side-space');$('.topbar .right-side').removeClass('sidebar-hide-contents-xs');$('.ossn-inner-page').removeClass('sidebar-hide-contents-xs');$('.topbar .right-side').addClass('right-side-nospace');$('.sidebar').addClass('sidebar-close');$('.ossn-page-container').addClass('sidebar-close-page-container');}});var $chatsidebar=$('.ossn-chat-windows-long .inner');if($chatsidebar.length){$chatsidebar.css('height',$(window).height()-45);}
$(document).on('scroll',function(){white_theme_addpost_img_bg();if($chatsidebar.length){if($(document).scrollTop()>=50){$chatsidebar.addClass('ossnchat-scroll-top');$chatsidebar.css('height',$(window).height());}else if($(document).scrollTop()==0){$chatsidebar.removeClass('ossnchat-scroll-top');$chatsidebar.css('height',$(window).height()-45);}}});if($(document).innerWidth()>=1300){$('#sidebar-toggle').trigger('click');}});$(document).ready(function(){$(".ossn-page-loading-annimation").fadeOut("slow");});$(window).on('load resize',function(){if(document.querySelector("#draggable")){if(($('.ossn-group-cover').height()+$('.profile-cover').height())<481){const desktop_cover_width=1040;const desktop_cover_height=200;var mobile_cover_height=$('.ossn-group-cover').height()+$('.profile-cover').height();var real_image_width=document.querySelector("#draggable").naturalWidth;var real_image_height=document.querySelector("#draggable").naturalHeight;var mobile_height_factor=real_image_height/mobile_cover_height;var mobile_pixel_width=desktop_cover_width/mobile_height_factor;var current_cover_width=$('.ossn-group-cover').width()+$('.profile-cover').width();var mobile_width_factor=current_cover_width/mobile_pixel_width;var mobile_pixel_height=mobile_width_factor*mobile_cover_height;$('#draggable').css('height',mobile_pixel_height);mobile_pixel_width=parseInt($('#draggable').css('width'));var desktop_scroll_top_max=real_image_height-desktop_cover_height;var mobile_scroll_top_max=mobile_pixel_height-mobile_cover_height;var height_scaling_factor=desktop_scroll_top_max/mobile_scroll_top_max;var desktop_scroll_left_max=real_image_width-desktop_cover_width;var mobile_scroll_left_max=mobile_pixel_width-current_cover_width;var width_scaling_factor=desktop_scroll_left_max/mobile_scroll_left_max;var cover_top=parseInt($('#draggable').data('top'));var cover_left=parseInt($('#draggable').data('left'));var mobile_pixel_top=cover_top/height_scaling_factor;var mobile_pixel_left=cover_left/width_scaling_factor;$('#draggable').css('top',mobile_pixel_top);$('#draggable').css('left',mobile_pixel_left);}
$('#draggable').fadeIn();}});$(document).ready(function(){var comRightColumnFocusizerPosition=$(window).scrollTop();var comRightColumnFocusizerWidth=$(window).width();var comRightColumnFocusizerOldFix=0;var comRightColumnFocusizerPushed=false;var themeAwesome=false;if($('#navbarNavDropdown').length){themeAwesome=true;}
$(window).on('load resize scroll',function(e){var windowHeight;var adsHeight;var adsWidth;var adsTop;var scrollPosition;var newsColumn;var newsColumnHeight;var adsColumn;var focusColumn=false;var focusColumnOffset;var topbarHeight;var fixedTopAdjust;const FLOATING_BOTTOM_MARGIN=20;const CONTENT_TOP_MARGIN=10;const CORE_FOOTER_HEIGHT=48;var feed_columns=['.newsfeed-middle','.ossn-profile-wall','.group-wall','.user-activity'];var side_columns=['.newsfeed-right','.ossn-profile-sidebar','.page-sidebar','.business-page-right-bottom'];for(var i=0;i<feed_columns.length;i++){if($(feed_columns[i]).length){newsColumn=$(feed_columns[i]).parent("[class^=col-md-]");newsColumnHeight=$(newsColumn).innerHeight();adsColumn=$(side_columns[i]).parent("[class^=col-md-]");focusColumn=$(adsColumn).children();break;}}
if(!focusColumn){return;}
if(e.type=='resize'){if($(adsColumn).css('flex')=='0 0 auto'&&comRightColumnFocusizerPushed){$(focusColumn).css("top",comRightColumnFocusizerOldFix);comRightColumnFocusizerPushed=false;}
if($(adsColumn).css('flex')==1){if(!comRightColumnFocusizerPushed){comRightColumnFocusizerOldFix=parseFloat($(focusColumn).css("top"));comRightColumnFocusizerPushed=true;}
$(focusColumn).css('position','relative');$(focusColumn).css('top',0);$(focusColumn).css('width','auto');return;}}
if(focusColumn&&(!themeAwesome&&$(adsColumn).css("flex")=='0 0 auto')||(themeAwesome&&$(focusColumn).css('display')!='none')){if($('.topbar').css('position')=='fixed'){topbarHeight=$('.topbar').height()+CONTENT_TOP_MARGIN;fixedTopAdjust=topbarHeight-CONTENT_TOP_MARGIN;}
else{topbarHeight=CONTENT_TOP_MARGIN;fixedTopAdjust=0;}
var scroll_top=$(window).scrollTop();var scroll_difference;var scroll_down;if(scroll_top>comRightColumnFocusizerPosition){scroll_difference=scroll_top-comRightColumnFocusizerPosition;scroll_down=true;}else{scroll_difference=comRightColumnFocusizerPosition-scroll_top;scroll_down=false;}
comRightColumnFocusizerPosition=scroll_top;$(focusColumn).css('width','auto');$(focusColumn).css('height','auto');$(focusColumn).css('position','static');windowHeight=$(window).height();focusColumnOffset=$(focusColumn).offset();adsTop=focusColumnOffset.top;adsHeight=$(focusColumn).outerHeight()+adsTop+FLOATING_BOTTOM_MARGIN+fixedTopAdjust;adsWidth=$(focusColumn).outerWidth();e.stopPropagation();if(adsHeight-adsTop<newsColumnHeight){scrollPosition=comRightColumnFocusizerPosition;if(scrollPosition>0){$(focusColumn).css("position","fixed");$(focusColumn).css("width",adsWidth);var new_top=0;if(scroll_down){new_top=parseFloat($(focusColumn).css("top"))-scroll_difference+$(focusColumn).data('fixed-top-adjust');$(focusColumn).data('fixed-top-adjust',0);if($(focusColumn).outerHeight()>windowHeight-fixedTopAdjust){if(new_top<topbarHeight-adsHeight+windowHeight+adsTop&&$(window).scrollTop()+CORE_FOOTER_HEIGHT<$(document).height()-$(window).height()){new_top=topbarHeight-adsHeight+windowHeight+adsTop;}}
if($(focusColumn).outerHeight()<windowHeight-fixedTopAdjust&&new_top<topbarHeight){new_top=topbarHeight-CONTENT_TOP_MARGIN;}}
else{new_top=parseFloat($(focusColumn).css("top"))+scroll_difference;if(new_top>topbarHeight){new_top=topbarHeight;var cover_gap=parseFloat(newsColumn.offset().top)-scrollPosition;if(cover_gap>topbarHeight){new_top=cover_gap;}}}
$(focusColumn).css("top",new_top);if(newsColumnHeight-adsHeight+adsTop>windowHeight){if(comRightColumnFocusizerCoreFooterIsVisible($('.footer-contents'))){$('.sidebar-footer-content').fadeOut();}
else{$('.sidebar-footer-content').fadeIn();}}}
else{$(focusColumn).css("position","relative");$(focusColumn).css("top",0);$(focusColumn).data('fixed-top-adjust',adsTop);}}}
else{$(focusColumn).css("position","relative");}});});comRightColumnFocusizerCoreFooterIsVisible=function(el){const CORE_FOOTER_HEIGHT=48;if(el.length){var win=$(window);var bounds=el.offset();var viewport={top:win.scrollTop()};viewport.bottom=viewport.top+win.height()+CORE_FOOTER_HEIGHT;bounds.bottom=bounds.top+el.outerHeight();return(!(viewport.bottom<bounds.top||viewport.bottom<bounds.bottom||viewport.top>bounds.bottom||viewport.top>bounds.top));}
return false;};var PasswordValidation=new Array();Array.prototype.remove=function(){var what,a=arguments,L=a.length,ax;while(L&&this.length){what=a[--L];while((ax=this.indexOf(what))!==-1){this.splice(ax,1);}}
return this;};this["JST"]=this["JST"]||{};this["JST"]["input_wrapper"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<div class="jq-password-validator">\n';}
return __p};this["JST"]["length"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<div class="jq-password-validator__rule is-valid length">\n\t'+Ossn.Print('passwordvalidation:atleast',[((__t=(length))==null?'':__t)])+'\n</div>\n';}
return __p};this["JST"]["popover"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<div class="jq-password-validator__popover">\n\t<header>'+Ossn.Print('passwordvalidation:passwordmustbe')+'</header>\n</div>\n';}
return __p};this["JST"]["row"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<div class="jq-password-validator__rule '+
((__t=(ruleName))==null?'':__t)+'">\n\t<svg xmlns="http://www.w3.org/2000/svg" class="jq-password-validator__checkmark" viewBox="0 0 8 8">\n\t  <path d="M6.41 0l-.69.72-2.78 2.78-.81-.78-.72-.72-1.41 1.41.72.72 1.5 1.5.69.72.72-.72 3.5-3.5.72-.72-1.44-1.41z" transform="translate(0 1)" />\n\t</svg>\n\t'+
((__t=(preface))==null?'':__t)+'\n\t<em>'+
((__t=(message))==null?'':__t)+'</em>\n</div>\n';}
return __p};;(function($,window,document,undefined){"use strict";var pluginName="passwordValidator",defaults={length:12,require:["length","lower","upper","digit"]};function Plugin(element,options){this.element=element;this.settings=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init();}
var validators={upper:{validate:function(password){if(password.match(/[A-Z]/)!=null){PasswordValidation.remove('upper');return true;}else{if(PasswordValidation.indexOf('upper')==-1){PasswordValidation.push('upper');}
return false;}},message:Ossn.Print('passwordvalidation:capitalletter')},lower:{validate:function(password){if(password.match(/[a-z]/)!=null){PasswordValidation.remove('lower');return true;}else{if(PasswordValidation.indexOf('lower')==-1){PasswordValidation.push('lower');}
return false;}},message:Ossn.Print('passwordvalidation:lowerletter')},digit:{validate:function(password){if(password.match(/\d/)!=null){PasswordValidation.remove('digit');return true;}else{if(PasswordValidation.indexOf('digit')==-1){PasswordValidation.push('digit');}
return false;}},message:Ossn.Print('passwordvalidation:number')},length:{validate:function(password,settings){if(password.length>=settings.length){PasswordValidation.remove('length');return true;}
if(PasswordValidation.indexOf('length')==-1){PasswordValidation.push('length');}
return false;},message:function(settings){return Ossn.Print('passwordvalidation:atleast',[settings.length]);},preface:"",}};$.extend(Plugin.prototype,{init:function(){this.wrapInput(this.element);this.inputWrapper.append(this.buildUi());this.bindBehavior();},wrapInput:function(input){$(input).wrap(JST.input_wrapper());this.inputWrapper=$(".jq-password-validator");return this.inputWrapper;},buildUi:function(){var ui=$(JST.popover());var _this=this;_.each(this.settings.require,function(requirement){var message;if(validators[requirement].message instanceof Function){message=validators[requirement].message(_this.settings);}else{message=validators[requirement].message;}
var preface=validators[requirement].preface;var ruleMarkup=JST.row({ruleName:requirement,message:message,preface:preface});ui.append($(ruleMarkup));});this.ui=ui;ui.hide();return ui;},bindBehavior:function(){var _this=this;$(this.element).on("focus",function(){_this.validate();_this.showUi();});$(this.element).on("blur",function(){_this.hideUi();});$(this.element).on("keyup",function(){_this.validate();});},showUi:function(){this.ui.show();$(this.element).parent().removeClass("is-hidden");$(this.element).parent().addClass("is-visible");},hideUi:function(){this.ui.hide();$(this.element).parent().removeClass("is-visible");$(this.element).parent().addClass("is-hidden");},validate:function(){var currentPassword=$(this.element).val();var _this=this;_.each(this.settings.require,function(requirement){if(validators[requirement].validate(currentPassword,_this.settings)){_this.markRuleValid(requirement);}else{_this.markRuleInvalid(requirement);}});},markRuleValid:function(ruleName){var row=this.ui.find("."+ruleName);row.addClass("is-valid");row.removeClass("is-invalid");},markRuleInvalid:function(ruleName){var row=this.ui.find("."+ruleName);row.removeClass("is-valid");row.addClass("is-invalid");}});$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new Plugin(this,options));}});};})(jQuery,window,document);Ossn.RegisterStartupFunction(function(){$(document).ready(function(){PasswordValidation.push('length');$('#ossn-home-signup input[name="password"]').passwordValidator({require:['length','lower','upper','digit'],length:8});});});Ossn.RegisterStartupFunction(function(){$(document).ready(function(){$('body').on('click','.menubuilder-icon-select',function(){$('.menu-builder-icons-selected').removeClass('menu-builder-icons-selected');if(!$(this).hasClass('menu-builder-icons-selected')){$(this).addClass('menu-builder-icons-selected');$('input[name="icon_name"').val($(this).attr('data-icon'));$('input[name="icon_unicode"').val($(this).attr('data-key'));}});$('body').on('click','#menu-builder-next',function(){$('.menubuilder-main-form').addClass("d-none");$('.menu-builder-icons').removeClass('d-none');});$('body').on('change','#menu-select-type',function(){$type=$(this).val();Ossn.PostRequest({url:Ossn.site_url+'menubuilder/submenu?type='+$type,beforeSend:function(request){$('.menu-select-sub').html('<div class="ossn-loading-menubuilder"></div>');},callback:function(callback){if(callback){$('.menu-select-sub').html(callback);}}});});$replaceIcons=function($element){$val=$(this).text();$icon=$(this).attr('data-menubuilder-icon');$text=$val.charAt(0).toUpperCase()+$val.slice(1);$(this).html('<i class="'+$icon+'"></i>'+$text);};$('.menubuilder-item-topbar-admin').each($replaceIcons);$('.menubuilder-item-admin-sidemenu').each($replaceIcons);$('.menubuilder-item-footer').each($replaceIcons);$('[class*=menu-topbar-dropdown-menubuilder]').each(function($element){$val=$(this).text();$icon=$(this).attr('data-menubuilder-icon');$text=$val.charAt(0).toUpperCase()+$val.slice(1);$(this).html('<i class="'+$icon+'"></i>'+$text);});});});Ossn.register_callback('ossn','init','vid_converse_setup_call_btn');function vid_converse_setup_call_btn(){$(document).ready(function(){$('body').on('click','.vidconverse-button-widget:not(.vidconverse-button-widget-disabled)',function(){$ismobile=false;if($('.vidconverse-mobile-btn').is(':visible')){$ismobile=true;$('.vidconverse-mobile-btn').attr("class","vidconverse-mobile-btn btn btn-success d-inline d-sm-none vidconverse-button-widget-disabled");$('.vidconverse-mobile-btn').html(Ossn.Print('vidconverse:call:startingmobiletext'));}
var guid=$(this).attr('data-guid');var name=$(this).attr('data-name');Ossn.PostRequest({url:Ossn.site_url+'action/vidconverse/setup/call?guid='+guid,beforeSend:function(){$('.vidconverse-widget .button a').hide();$('.vidconverse-widget .button .ossn-loading').show();},callback:function(callback){$('.vidconverse-widget .button').html("<div class='result'></div>");if(callback['status']==true){$('.vidconverse-widget .button .result').append("<li>"+Ossn.Print('vidconverse:call:initiated')+"</li>");$('.vidconverse-widget .button .result').append('<li>'+Ossn.Print('vidconverse:user:notified',[name])+'</li>');$('.vidconverse-widget .button .result').append("<li>"+Ossn.Print('vidconverse:you:notified')+"</li>");if($ismobile==false){window.open(callback['caller_url'],'popUpWindow','height=720,width=1280,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes');}
if($ismobile){window.location=callback['caller_url'];}}else{if($ismobile){alert(Ossn.Print('vidconverse:call:error'));}
$('.vidconverse-widget .button .result').append("<li class='text-danger'>"+Ossn.Print('vidconverse:call:error')+"</li>");}}});});$('body').on('click','.vidconverse-accept-btn',function(){$ismobile=false;if($('.vidconverse-message-accept-mobile').is(':visible')){$ismobile=true;}
$hash=$(this).attr('data-hash');if($ismobile==false){window.open($hash,'popUpWindow','height=720,width=1280,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes');}else{window.location=$hash;}});});}$(document).ready(function(){var cYear=(new Date).getFullYear();var alldays=Ossn.Print('datepicker:days');var shortdays=alldays.split(",");var allmonths=Ossn.Print('datepicker:months');var shortmonths=allmonths.split(",");var datepick_args={changeMonth:false,changeYear:false,dateFormat:'dd/mm/yy',startDate:new Date($('.expense').attr('data-year'),$('.expense').attr('data-month')-1,'01'),endDate:new Date($('.expense').attr('data-year'),$('.expense').attr('data-month')-1,'31'),hideIfNoPrevNext:true,};if(Ossn.isLangString('datepicker:days')){datepick_args['dayNamesMin']=shortdays;}
if(Ossn.isLangString('datepicker:months')){datepick_args['monthNamesShort']=shortmonths;}
$("input[name='expnesedate']").datepicker(datepick_args);$("input[name='expnesedate']").datepicker('setDate',new Date());console.log($('.expense').attr('data-month'));$('body').on('click','.expense .remove-item',function(){$count=$('.expense-form-item').length;if($count>1){$('.expense-form-item:last').remove();}
$count=$('.expense-form-item').length;if($count==1){$('.expense .remove-item').addClass('hidden');}});$('body').on('click','.expense .add-item',function(){$html='<div class="row expense-form-item"> <div class="col-md-6"> <input type="text" class="fa" name="items[]" placeholder="&#xf02a '+Ossn.Print('em:itemname')+'"/> </div> <div class="col-md-6"> <input type="number" step="0.01" class="fa" name="price[]" placeholder="&#xf0d6 '+Ossn.Print('em:price')+'"/> </div> </div>';$('.remove-item').removeClass('hidden');$('.expense .items-enter').append($html);});$('body').on('click','.expense-item-delete',function(e){e.preventDefault();$url=$(this).attr('href');$guid=$(this).attr('data-guid');Ossn.PostRequest({url:$url,action:false,beforeSend:function(){$('.expense-lists-item-'+$guid).find('.ossn-loading').remove();$('.expense-lists-item-'+$guid).find('.buttons a').hide();$('.expense-lists-item-'+$guid).find('.buttons').append('<div class="ossn-loading"></div>');},callback:function(callback){if(callback==1){$('.expense-lists-item-'+$guid).fadeOut('slow');$ammount=parseFloat($('.expense-lists-item-'+$guid).find('.ammount').text());$ammount_new=parseFloat($('.expense-list-container .total').text())-$ammount;$('.expense-list-container .total').text($ammount_new);}
if(callback==0){$('.expense-lists-item-'+$guid).find('.ossn-loading').remove();$('.expense-lists-item-'+$guid).find('.buttons a').show();}}});});$('body').on('click','.expense-search-list',function(){$('#expense-search').submit();});});$(document).ready(function(){$('body').on('change','.expense select[name="year"]',function(){$('#expense-select-year').submit();});$('body').on('click','.expense-month',function(){if(!$(this).hasClass('expense-month-faded')){Ossn.redirect('expensemanagement/view/'+$(this).attr('data-month')+'/'+$(this).attr('data-year'));}});});Ossn.register_callback('ossn','init','MarkNotification_js_init');function MarkNotification_js_init(){$(document).ready(function(){$('body').delegate('.apop-notif-read','click',function(){var $guid=$(this).attr('data-guid');});$('body').delegate('.apop-notif-delete','click',function(){var $guid=$(this).attr('data-guid');});});}
function mnInstant(type,guid){let xhr=new XMLHttpRequest();if(type==1){let url=Ossn.site_url+"action/mark/delete?guid="+guid.toString();url=Ossn.AddTokenToUrl(url);xhr.open('PUT',url,true);xhr.setRequestHeader("Content-Type","application/json")
xhr.send(null);Ossn.trigger_message('Notification has been deleted. You may have to refresh to see it removed.','success');Ossn.NotificationsCheck();}
if(type==2){let url=Ossn.site_url+"action/mark/read?guid="+guid.toString();url=Ossn.AddTokenToUrl(url);xhr.open('PUT',url,true);xhr.setRequestHeader("Content-Type","application/json")
xhr.send(null);Ossn.trigger_message('Notification has been Marked Read. You may have to refresh to see it changed.','success');Ossn.NotificationsCheck();}}$(document).ready(function(){$('body').on('click','.ossn-wall-container-menu-videosgroup',function(){$url=window.location.href;$url=$url.replace(Ossn.site_url,'');$url=$url.replace('group/','');Ossn.redirect('video/add/group/'+$url);});$('body').on('click','.ossn-wall-container-menu-videosbusinesspage',function(){$url=window.location.href;$url=$url.replace(Ossn.site_url,'');$url=$url.replace('page/view/','');$url=$url.replace('company/','');Ossn.redirect('video/add/businesspage/'+$url);});$('body').on('click','.ossn-wall-container-menu-videos',function(){Ossn.redirect('video/add');});});Ossn.RegisterStartupFunction(function(){$(document).ready(function(){$('.profile-menu-extra-delete_user').on('click',function(e){e.preventDefault();var del=confirm(Ossn.Print('ossn:exception:make:sure'));if(del==true){var actionurl=$(this).attr('href');window.location=actionurl;}});if($('select#can_moderate').length){var html='<div id="can_moderate" class="dropdown-block" style="display:none;">'+$('select#can_moderate').closest('div').html()+'</div>';$('select#can_moderate').closest('div').remove();$('select[name=type]').closest('div').after(html);can_moderate();}
$('select[name=type]').on('change',function(){can_moderate();});$('#can_moderate').prepend("<label>"+Ossn.Print('moderator')+"</label>");});function can_moderate(){var value=$('select[name=type]').val();if(value=='normal'){$('div#can_moderate').show();}else{$('select#can_moderate').val('no');$('div#can_moderate').hide();}}});$(document).ready(function(){if($('.ossn-wall-container-data').length){$('.ossn-wall-container-data').append("<div class='link-preview-container'></div>");}
$('body').on('click','.ossn-wall-post',function(){$('.ossn-wall-container-data .link-preview-container').html(" ");});$('body').on('change','.ossn-wall-container-data textarea',function(){$('.ossn-wall-container-data .link-preview-container').html(" ");$text=$(this).val();var urls=$text.match(/https?:\/\/[^\s]+/g);if(urls){var $urls=Array.prototype.slice.apply(urls);$urls=$urls[0].split(' ');$url=$urls.pop();if($url!=''){Ossn.PostRequest({url:Ossn.site_url+'link_preview',params:'&text='+$text,beforeSend:function(request){$('.ossn-wall-container-data .link-preview-container').html('<div class="ossn-loading"></div>');},callback:function(callback){if(callback['contents']){$('.ossn-wall-container-data .link-preview-container').html(callback['contents']);}else{$('.ossn-wall-container-data .link-preview-container').html(" ");}}});}}else{$('.ossn-wall-container-data .link-preview-container').html(" ");}});var $wall_request_completed=false;$(document).ajaxSuccess(function(event,xhr,settings){var aurl=Ossn.ParseUrl(settings.url).path;if(aurl=='/action/wall/post/a'||aurl=='/action/wall/post/u'||aurl=='/action/wall/post/g'){$('.ossn-wall-container-data .link-preview-container').html(" ");$wall_request_completed=true;}});$(document).ajaxSuccess(function(event,xhr,settings){var aurl=Ossn.ParseUrl(settings.url).path;if(aurl=='/link_preview'&&$wall_request_completed==true){$('.ossn-wall-container-data .link-preview-container').html(" ");$wall_request_completed=false;}});});$(document).ready(function(){$('body').on('click','.ossn-report-this',function(e){var $dataguid=$(this).attr('data-guid');var $datatype=$(this).attr('data-type');Ossn.MessageBox('report/file?data-guid='+$dataguid+'&data-type='+$datatype);});$('body').on('click','#ossn-file-report',function(e){e.preventDefault();$form=$('#ossn-report-file');Ossn.PostRequest({url:Ossn.site_url+"action/file/report",params:'&reason='+$form.find('textarea[name="reason"]').val()+'&guid='+$form.find('input[name="guid"]').val()+'&type='+$form.find('input[name="type"]').val(),callback:function(callback){Ossn.MessageBoxClose();if(callback['success']){Ossn.trigger_message(callback['success']);}
if(callback['error']){Ossn.trigger_message(callback['error'],'error');}}});});});Ossn.register_callback('ossn','init','family_member_request_buttons');Ossn.register_callback('ossn','init','family_member_friend_picker');function family_member_friend_picker(){$(document).ready(function(){if($.isFunction($.fn.tokenInput)){$("#familysearch-family-member, #relation-family-member").tokenInput(Ossn.site_url+"friendpicker",{placeholder:Ossn.Print('family:relationship:search:family:member'),hintText:false,tokenLimit:1,propertyToSearch:"first_name",resultsFormatter:function(item){return"<li>"+"<img src='"+item.imageurl+"' title='"+item.first_name+" "+item.last_name+"' height='25px' width='25px' />"+"<div style='display: inline-block; padding-left: 10px;'><div class='full_name' style='font-weight:bold;color:#2B5470;'>"+item.first_name+" "+item.last_name+"</div></div></li>"},tokenFormatter:function(item){return"<li><p>"+item.first_name+" "+item.last_name+"</p></li>"},});}});}
function family_member_request_buttons(){$(document).ready(function(){var cYear=(new Date).getFullYear();var alldays=Ossn.Print('datepicker:days');var shortdays=alldays.split(",");var allmonths=Ossn.Print('datepicker:months');var shortmonths=allmonths.split(",");var datepick_args={changeMonth:true,changeYear:true,dateFormat:'mm/dd/yy',yearRange:'1900:'+cYear,};if(Ossn.isLangString('datepicker:days')){datepick_args['dayNamesMin']=shortdays;}
if(Ossn.isLangString('datepicker:months')){datepick_args['monthNamesShort']=shortmonths;}
$("#relation-status-date").datepicker(datepick_args);$('body').on('click','.add-family-member',function(){$('.family-member-add-form').toggle();});$('body').on('click','.add-relationship-member',function(){$('.relation-member-add-form').toggle();});$('body').on('change','.relation-status-type',function(){$type=$(this).val();console.log($type);switch($type){case'Single':case'Separated':$('.relation-status-inputs-level2').find('input').val("");$('.relation-status-inputs-level2').find('select').val("");$('.relation-status-inputs-level2').hide();break;default:$('.relation-status-inputs-level2').show();}});});$(document).ready(function(){$('body').on('click','.family-member-accept',function(){$guid=$(this).attr('data-guid');var $container=$('#family-member-row-'+$guid);$privacy=$container.find('.family-member-privacy').val();Ossn.PostRequest({url:Ossn.site_url+"action/family/member/accept?guid="+$guid+"&privacy="+$privacy,beforeSend:function(){$container.find('.family-member-request-btn').hide();$container.find('.ossn-loading').show();},callback:function(callback){if(callback==1){$container.fadeOut('slow');window.location.reload(true);}else{$container.find('.family-member-request-btn').show();$container.find('.ossn-loading').hide();}}});});$('body').on('click','.family-relation-accept',function(){$guid=$(this).attr('data-guid');var $container=$('#family-member-row-'+$guid);$privacy=$container.find('.family-member-privacy').val();Ossn.PostRequest({url:Ossn.site_url+"action/family/relation/accept?guid="+$guid+"&privacy="+$privacy,beforeSend:function(){$container.find('.family-member-request-btn').hide();$container.find('.ossn-loading').show();},callback:function(callback){if(callback==1){$container.fadeOut('slow');window.location.reload(true);}else{$container.find('.family-member-request-btn').show();$container.find('.ossn-loading').hide();}}});});$('body').on('change','.family-members-edit',function(){$guid=$(this).attr('data-guid');$privacy=$(this).val();Ossn.PostRequest({url:Ossn.site_url+"action/family/member/edit?guid="+$guid+"&privacy="+$privacy,callback:function(callback){}});});$('body').on('change','.family-relation-privacy',function(){$guid=$(this).attr('data-guid');$privacy=$(this).val();Ossn.PostRequest({url:Ossn.site_url+"action/family/relation/edit?guid="+$guid+"&privacy="+$privacy,callback:function(callback){}});});});}
$(document).ready(function(){$("#business-page-cover-file").on('change',function(){var $profile_cover_text_btn='';var fileInput=$('#upload-cover-page').find("input[type=file]")[0];var file=fileInput.files&&fileInput.files[0];if(file){var img=new Image();img.src=window.URL.createObjectURL(file);img.onload=function(){var width=img.naturalWidth;var height=img.naturalHeight;var theme_config=$('#ossn-theme-config');var default_cover_height=theme_config.attr('data-desktop-cover-height');var default_cover_width=theme_config.attr('data-minimum-cover-image-width');window.URL.revokeObjectURL(img.src);if(width<default_cover_width||height<default_cover_height){var error=Ossn.Print('bpage:cover:err1:detail',[default_cover_width,default_cover_height]);Ossn.trigger_message(error,'error');return;}
$('#upload-cover-page').trigger('submit');};}});Ossn.ajaxRequest({url:Ossn.site_url+'action/bpage/cover/add',action:true,containMedia:true,form:'#upload-cover-page',error:function(xhr,status,error){if((error=='Internal Server Error'||error!=='')&&status!=='abort'){Ossn.MessageBox('syserror/unknown');}
$('#change-bpcover-btn').html($profile_cover_text_btn);},beforeSend:function(){$profile_cover_text_btn=$('#change-bpcover-btn').text();$('#change-bpcover-btn').html("<div class='ossn-loading'></div>");},callback:function(code){$('#change-bpcover-btn').html($profile_cover_text_btn);if(code==0){Ossn.trigger_message(Ossn.Print('bpage:cover:upload:error'),'error');}else{var $time=$.now();$('.business-page-cover-img').attr('src',code);$('#reposition-cover-page').removeClass('d-none');}}});});Ossn.RegisterStartupFunction(function(){$(document).ready(function(){$('#reposition-cover-page').on('click',function(){$('#reposition-cover-page').hide();$('#save-position-cover-page').css('display','inline-block');;$(function(){$.globalVars={originalTop:0,originalLeft:0,maxHeight:$("#draggable").height()-$("#container").height(),maxWidth:$("#draggable").width()-$("#container").width()};$("#draggable").draggable({start:function(event,ui){if(ui.position!=undefined){$.globalVars.originalTop=ui.position.top;$.globalVars.originalLeft=ui.position.left;}},drag:function(event,ui){var newTop=ui.position.top;var newLeft=ui.position.left;if(ui.position.top<0&&ui.position.top*-1>$.globalVars.maxHeight){newTop=$.globalVars.maxHeight*-1;}
if(ui.position.top>0){newTop=0;}
if(ui.position.left<0&&ui.position.left*-1>$.globalVars.maxWidth){newLeft=$.globalVars.maxWidth*-1;}
if(ui.position.left>0){newLeft=0;}
ui.position.top=newTop;ui.position.left=newLeft;Ossn.PageCover_top=newTop;Ossn.PageCover_left=newLeft;}});});});var bpage_pchange_btext=$('#bpage-upload-photo-btn').text();Ossn.ajaxRequest({url:Ossn.site_url+'action/bpage/photo/add',action:true,containMedia:true,form:'#upload-photo-page',error:function(xhr,status,error){window.location.reload();},beforeSend:function(xhr){$('.business-page .upload-photo').addClass('user-photo-uploading');},callback:function(code){if(code==0){Ossn.trigger_message(Ossn.Print('bpage:cover:upload:error'),'error');window.location.reload();}else{$time=$.now();$('.business-page .logo-page').attr('src',code);$('.business-page .logo-page').attr('style','');$('.business-page .upload-photo').removeClass('user-photo-uploading');}}});$('body').on('click','.like-page',function(){$element=$(this);$guid=$element.attr('data-guid');Ossn.PostRequest({url:Ossn.site_url+"action/bpage/like?guid="+$guid,beforeSend:function(){$element.html('<div class="ossn-loading"></div>');},callback:function(callback){if(callback==0){$element.html("<i class='fa fa-thumbs-up'></i>"+Ossn.Print('ossn:like'));}
if(callback==1){$element.html("<i class='fa fa-thumbs-down'></i>"+Ossn.Print('ossn:unlike'));$element.removeClass('like-page');$element.addClass('unlike-page');}}});});$('body').on('click','.unlike-page',function(){$element=$(this);$guid=$element.attr('data-guid');Ossn.PostRequest({url:Ossn.site_url+"action/bpage/unlike?guid="+$guid,beforeSend:function(){$element.html('<div class="ossn-loading"></div>');},callback:function(callback){if(callback==0){$element.html("<i class='fa fa-thumbs-down'></i>"+Ossn.Print('ossn:unlike'));}
if(callback==1){$element.html("<i class='fa fa-thumbs-up'></i>"+Ossn.Print('ossn:like'));$element.addClass('like-page');$element.removeClass('unlike-page');}}});});$('body').on('click','#bpage-upload-photo-btn',function(){Ossn.Clk("#upload-photo-page input[type='file']");});$('body').on('click','#save-position-cover-page',function(){var $btn_text_cover_page=$('.save-position-cover-page').text();var $pcover_top=$('.business-page-cover-img').css('top');var $pcover_left=$('.business-page-cover-img').css('left');var $guid=$('.business-page-cover-img').attr('data-guid');Ossn.PostRequest({url:Ossn.site_url+"action/bpage/cover/save?guid="+$guid+"&top="+$pcover_top+'&left='+$pcover_left,beforeSend:function(){$('#save-position-cover-page').html('<div class="ossn-loading"></div>');},callback:function(callback){$('.save-position-cover-page').text($btn_text_cover_page);if(callback==0){location.reload();}else{$('#reposition-cover-page').show();$('#save-position-cover-page').hide();}}});});});});Ossn.RegisterStartupFunction(function(){$(document).ready(function(){$('body').on('click','.ossn-wall-container-menu-polls',function(){Ossn.redirect('polls/add');});$('body').on('click','.ossn-wall-container-menu-pollsgroup',function(){$url=window.location.href;$url=$url.replace(Ossn.site_url,'');$url=$url.replace('group/','');Ossn.redirect('polls/add/group/'+$url);});$('body').on('click','.ossn-wall-container-menu-pollsbusinesspage',function(){$url=window.location.href;$url=$url.replace(Ossn.site_url,'');$url=$url.replace('page/view/','');$url=$url.replace('company/','');Ossn.redirect('polls/add/businesspage/'+$url);});var $counter=1;$('body').on('click','#polls-add-option',function(){$counter++;$('.polls-form-options').append('<input type="text" name="poll_options_'+$counter+'" placeholder="'+Ossn.Print('polls:option:title')+'" />');$('#polls-form-counter').val($counter);});$('body').on('change','.ossn-polls-item input[type="checkbox"]',function(){var val=$(this).val();$(this).closest(".poll-container").find('input[name="option"]').val(val);$(this).closest(".poll-container").find('input[type="checkbox"]').not(this).prop('checked',false);});$('body').on('click','.polls-show-voters',function(e){if(e.target.tagName!='INPUT'){var guid=$(this).data('guid');var option=$(this).data('option');if(guid&&option){Ossn.MessageBox('polls/voters/'+guid+'/'+option);}}});});});Ossn.poll=function($guid){var $form='#ossn-polls-form-questions-'+$guid;Ossn.ajaxRequest({url:Ossn.site_url+"action/poll/vote",form:$form,beforeSend:function(){$($form).find('.ossn-poll-loading-submit').show();$($form).find('input[type="submit"]').hide();},callback:function(callback){if(callback['data']['status']==true){$button=$($form).find('#poll-submit-button');$('.ossn-poll-item-main-'+$guid).html(callback['data']['option']);Ossn.trigger_message(callback['success']);}
if(['data']['status']==false){Ossn.trigger_message(callback['error'],'error');}}});};Ossn.RegisterStartupFunction(function(){$(document).ready(function(){$('body').on('click','.ossn-wall-container-menu-events',function(){Ossn.redirect('event/add');});if($('#event-location-input').length){var placesAutocomplete=places({container:document.querySelector('#event-location-input')});}
$('body').on('click','.event-relation',function(){$guid=$(this).attr('data-guid');$type=$(this).attr('data-type');Ossn.MessageBox('event/relations/'+$guid+'?type='+$type);});$('body').on('click','.ossn-wall-container-menu-eventsgroups',function(){$url=window.location.href;$url=$url.replace(Ossn.site_url,'');$url=$url.replace('group/','');Ossn.redirect('event/add/group/'+$url);});$('body').on('click','.ossn-wall-container-menu-eventsbusinesspage',function(){$url=window.location.href;$url=$url.replace(Ossn.site_url,'');$url=$url.replace('page/view/','');$url=$url.replace('company/','');Ossn.redirect('event/add/businesspage/'+$url);});});});function ossn_event_calendar(isgroup=0,isbusinesspage=0){$(document).ready(function(){Ossn.PostRequest({url:Ossn.site_url+"action/event/calander/json",params:'is_group='+isgroup+"&is_businesspage="+isbusinesspage,callback:function(jsonEvents){$('#eventCal').find('.oloading-c').remove();const ec=new EventCalendar(document.getElementById('eventCal'),{view:'timeGridWeek',locale:'en',allDaySlot:false,buttonText:{close:Ossn.Print('event:cal:close'),dayGridMonth:Ossn.Print('event:cal:month'),next:Ossn.Print('event:cal:next'),prev:Ossn.Print('event:cal:previous'),listDay:Ossn.Print('event:cal:list'),listMonth:Ossn.Print('event:cal:list'),listWeek:Ossn.Print('event:cal:list'),listYear:Ossn.Print('event:cal:list'),resourceTimeGridDay:Ossn.Print('event:cal:resources'),resourceTimeGridWeek:Ossn.Print('event:cal:resources'),resourceTimelineDay:Ossn.Print('event:cal:timeline'),resourceTimelineMonth:Ossn.Print('event:cal:timeline'),resourceTimelineWeek:Ossn.Print('event:cal:timeline'),timeGridDay:Ossn.Print('event:cal:day'),timeGridWeek:Ossn.Print('event:cal:week'),today:Ossn.Print('event:cal:today')},headerToolbar:{start:'prev,next today',center:'title',end:'dayGridMonth,timeGridWeek,timeGridDay,listWeek'},events:jsonEvents,eventClick:function(info){if(typeof info.event.extendedProps.url!='undefined'){window.location=info.event.extendedProps.url;}},dayMaxEvents:true,nowIndicator:true,selectable:true});},});});}
(function($){var slideIndex=1;var id=0;var totalImages=0;var sid=0;var mouseOnContainer=false;var width=1;$.fn.fbStories=function(options){var settings=$.extend({barColor:"#F06",delay:1,dataurl:'./json.php',showAdd:true,addText:'&#43;',onShow:function(guid,url){},},options);var $element=this;if(!settings.dataurl){console.log('There is no data URL');return false;}
$('body').on('mouseover touchstart','.fbstories-container .slideshow-container',function(){mouseOnContainer=true;});$('body').on('mouseleave touchend','.fbstories-container .slideshow-container',function(){mouseOnContainer=false;});showProgress=function(){$(".fbstories-container .status-bar").hide();$(".fbstories-container .status-bar").progressbar({value:0,});$('.fbstories-container .status-bar .ui-progressbar-value').css({background:settings.barColor});$(".fbstories-container .status-bar").show();id=setInterval(progress,(settings.delay/100)*1000);function progress(){if(width>=100&&slideIndex>=totalImages){clearInterval(id);clearInterval(sid);}
if(mouseOnContainer==false){if(width>=100&&slideIndex>=totalImages){clearInterval(id);}else{width++;$(".status-bar").progressbar({value:width,});}}}};function chunkArray(myArray,chunk_size){var index=0;var arrayLength=myArray.length;var tempArray=[];for(index=0;index<arrayLength;index+=chunk_size){myChunk=myArray.slice(index,index+chunk_size);tempArray.push(myChunk);}
return tempArray;}
function initialize(){$element.prepend('<div class="fbstories-outside-container"> <div class="fbstories-items"></div></div>');$('body').prepend('<div class="fbstories-container"> <div class="fbstories-container-inner"> </div> </div>');if(settings.showAdd){$('.fbstories-items').prepend('<div class="fbstories-item-add" style=""> <div class="image0th"> <a class="fbstories-add-story" href="javascript:void(0);">'+settings.addText+'</a></div></div>');}}
function appendThumbs(){$.get(settings.dataurl,function(data){if(data[0].files&&data[0].files.length>0){$thumbs=[];$.each(data,function(){$file=this['files'][0];$border='';if($file['viewed']&&$file['viewed']==true){$border=' story-viewed';}
$thumbs.push({'thumb':$file,'owner':this['owner'],'data':this,'border':$border,});});if($thumbs.length>0){$count=1;$thumbnails='';$($thumbs).each(function(){$item='';$item+='<div class="fbstories-item'+this['border']+'" data-items=\''+JSON.stringify(this['data'])+'\'> <div class="user-image"> <img src="'+this['owner']['icon']+'" width="32" height="32" /> </div> <div class="image0th"> <img src="'+this['thumb']['url']+'" style="max-width:100%"> </div> <div class="user-name">'+this['owner']['fullname']+'</div> </div>';$thumbnails+=$item;$count++;});$('.fbstories-items').append($thumbnails);touchSlide();}}});}
function touchSlide(){const slider=document.querySelector(".fbstories-items");if(slider!==null){let isDown=false;let startX;let scrollLeft;slider.addEventListener("mousedown",e=>{isDown=true;slider.classList.add("active");startX=e.pageX-slider.offsetLeft;scrollLeft=slider.scrollLeft;});slider.addEventListener("mouseleave",()=>{isDown=false;slider.classList.remove("active");});slider.addEventListener("mouseup",()=>{isDown=false;slider.classList.remove("active");});slider.addEventListener("mousemove",e=>{if(!isDown)return;e.preventDefault();const x=e.pageX-slider.offsetLeft;const walk=x-startX;slider.scrollLeft=scrollLeft-walk;});}}
function plusSlides(n){clearInterval(id);width=0;showSlides(slideIndex+=n);}
function currentSlide(n){showSlides(slideIndex=n);}
function showSlides(n){var i;var slides=document.getElementsByClassName("fbstories-slides");if(n>slides.length){slideIndex=slides.length;}
if(n<1){slideIndex=1}
for(i=0;i<slides.length;i++){slides[i].style.display="none";}
$('.slideshow-container .total-images .current').text(slideIndex);slides[slideIndex-1].style.display="block";settings.onShow(slides[slideIndex-1].getAttribute('data-guid'),slides[slideIndex-1].getAttribute('data-url'),slides[slideIndex-1].getAttribute('data-owner'),slides[slideIndex-1]);$time=slides[slideIndex-1].getAttribute('data-time');$('.fbstories-container .user-name-time .time').html($time);$('.fbstories-container .fbstorie-item-delete').attr('data-guid',slides[slideIndex-1].getAttribute('data-guid'));$('.fbstories-container .fbstorie-item-delete').attr('data-owner',slides[slideIndex-1].getAttribute('data-owner'));if(slideIndex<=totalImages){showProgress();}}
initialize();appendThumbs();$('body').on('click','.slideshow-container .close',function(){width=0;slideIndex=1;mouseOnContainer=false;clearInterval(id);clearInterval(sid);$('.fbstories-container').hide();$('.fbstories-container-inner').html("");});$('body').on('click','.slideshow-container .slide-button',function(){clearInterval(sid);var $index=parseInt($(this).attr('data-index'));plusSlides($index);sid=setInterval(function(){if(mouseOnContainer==false&&width>=100){plusSlides(1);if(slideIndex==totalImages){clearInterval(sid);}}},100);});$('body').on('click','.fbstories-item',function(){slideIndex=1;width=0;id=0;sid=0;$json=JSON.parse($(this).attr('data-items'));if($json['owner']['fullname']){$container='<div class="slideshow-container"> <div class="status-bar" style="display:none;"></div> <div class="close">&#10799;</div><div class="fbstorie-item-delete"><i class="fa fa-trash-alt"></i></div> <div class="users-information"> <div class="users-information-inner"> <div class="user-image"> <img src="'+$json['owner']['icon']+'" width="32" height="32" /> </div> <div class="user-name-time"> <span class="name">'+$json['owner']['fullname']+'</span> <span class="time"></span> </div> <div class="total-images"> <span class="current">1</span> <span>/</span> <span class="total">3</span> </div> </div> </div>';totalImages=$json['files'].length;$.each($json['files'],function(){$container+='<div class="fbstories-slides fadefbstories" data-owner="'+$json['owner']['guid']+'" data-time="'+this['time']+'" data-url="'+this['url']+'" data-guid="'+this['guid']+'"> <img src="'+this['url']+'" style="max-width:100%"> <div class="text">'+this['title']+'</div> </div>';});$container+='<a class="prev slide-button"  data-index="-1">&#10094;</a> <a class="next slide-button" data-index="1">&#10095;</a> </div>';$('.fbstories-container-inner').html($container);$('.fbstories-container-inner .total-images .total').html($json['files'].length);$('.fbstories-container').show();showSlides(slideIndex);}});sid=setInterval(function(){if(mouseOnContainer==false&&width>=100){if(slideIndex==totalImages){clearInterval(sid);}else{plusSlides(1);}}},100);return this;};}(jQuery));Ossn.RegisterStartupFunction(function(){$(document).ready(function(){$('.profile-photo').off('mouseenter mouseleave');$('.upload-photo').show();});});Ossn.setVerifiedUsers=function($array){$.each($array,function(i,v){$e='.data-username-verified-'+v;if($($e).length){$($e).each(function(){if($(this).attr('data-verified')==0){$name=$(this).text();$(this).html(" ");$title=Ossn.Print('userverified:verified');$(this).html($name+'<i class="fa fa-check-circle verified-user verified-title" title="'+$title+'"></i>');$(this).attr('data-verified',1);Ossn.trigger_callback('userverified','domchanged',{'element':$(this)});}});}});};Ossn.verfiedUsers=function(){var $usernames=[];var $url=window.location.href;if($url.match('/u/')){$profile_username=$url.replace(Ossn.site_url,'');$usernames.push($profile_username.replace('u/',''));$('.ossn-profile').find('.user-fullname:eq(0)').attr('data-verified',0);$('.ossn-profile').find('.user-fullname:eq(0)').addClass('data-username-verified-'+$profile_username.replace('u/',''));}else{return false;}
var $list=jQuery.uniqueSort($usernames).join(',');Ossn.PostRequest({url:Ossn.site_url+'userverified/geticon?data='+$list,action:false,callback:function(callback){if(callback){Ossn.setVerifiedUsers(jQuery.uniqueSort(callback));}}});};Ossn.verifiedUsersInit=function($item,$array){$($item).each(function(i,v){$href=$(this).attr('href');$username=$href.replace(Ossn.site_url,'');$array.push($username.replace('u/',''));$(this).attr('data-verified',0);$(this).addClass('data-username-verified-'+$username.replace('u/',''));});};Ossn.RegisterStartupFunction(function(){$(document).ready(function(){Ossn.verfiedUsers();});});